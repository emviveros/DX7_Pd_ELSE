#N canvas 43 86 589 235 10;
#X declare -path else;
#X obj 45 59 hsl 90 15 5 5000 0 0 \$0-slider_attack \$0-slider_attack_rcv
a -12 8 0 10 -191407 -1 -1 8900 1;
#X obj 45 82 hsl 90 15 5 5000 0 0 \$0-slider_decay \$0-slider_decay_rcv
d -12 8 0 10 -191407 -1 -1 0 1;
#X obj 45 105 hsl 90 15 0 1 0 0 \$0-slider_sustain \$0-slider_sustain_rcv
s -12 8 0 10 -191407 -1 -1 8900 1;
#X obj 45 128 hsl 90 15 5 5000 0 0 \$0-slider_release \$0-slider_release_rcv
r -12 8 0 10 -191407 -1 -1 8900 1;
#X obj 337 203 outlet;
#X obj 154 54 vsl 32 70 0 8 0 0 \$0-ratio_slider \$0-ratio_slider_rcv
ratio 1 -9 0 10 -228856 -1 -1 6900 1;
#X obj 196 54 vsl 32 70 0 1 0 0 \$0-level_slider \$0-level_slider_rcv
level 1 -9 0 10 -228856 -1 -1 0 1;
#X obj 463 6 declare -path else;
#X floatatom 154 129 5 0 0 0 - #0-ratio_number_rcv #0-ratio_number
;
#X floatatom 196 129 5 0 0 0 - #0-level_number_rcv #0-level_number
;
#X text 28 40 Envelope;
#X obj 322 29 inlet;
#X obj 19 16 cnv 15 15 15 empty \$0-oscillator_title Oscillator\ 1
0 9 0 12 -262144 -1 0;
#X text 122 191 Esteban Viveros 2021;
#X obj 70 174 openfile https://github.com/emviveros/DX7_Pd_ELSE -h
DX7_Pd_ELSE github repository;
#N canvas 712 136 546 387 \$0-out 0;
#X obj 118 343 outlet;
#X msg 347 114 env \$1 \$2 \$3 \$4;
#X obj 143 230 list prepend all toOscs \$1;
#X msg 52 113 ratio \$1;
#X obj 143 251 list trim;
#X obj 32 50 r \$0-output_ratio;
#X obj 52 90 v \$0-ratio;
#X obj 185 51 r \$0-output_level;
#X obj 205 91 v \$0-level;
#X msg 205 114 level \$1;
#X obj 326 51 r \$0-output_envelope;
#X obj 347 91 array get \$0-envelope 0 4;
#X connect 1 0 2 0;
#X connect 2 0 4 0;
#X connect 3 0 2 0;
#X connect 4 0 0 0;
#X connect 5 0 6 0;
#X connect 6 0 3 0;
#X connect 7 0 8 0;
#X connect 8 0 9 0;
#X connect 9 0 2 0;
#X connect 10 0 11 0;
#X connect 11 0 1 0;
#X restore 347 142 pd \$0-out;
#N canvas 698 47 450 300 \$0-input 0;
#X obj 88 57 inlet;
#X obj 95 122 route \$1;
#X obj 150 122 route allOscs;
#X obj 95 163 route ratio level env, f 41;
#N canvas 788 80 450 300 set_ratio 0;
#X obj 109 42 inlet;
#X obj 163 150 v \$0-ratio;
#X obj 136 189 s \$0-update_ratio_gui;
#X obj 136 114 t b f;
#X connect 0 0 3 0;
#X connect 3 0 2 0;
#X connect 3 1 1 0;
#X restore 95 196 pd set_ratio;
#N canvas 478 157 450 300 set_level 0;
#X obj 109 52 inlet;
#X obj 156 139 v \$0-level;
#X obj 129 185 s \$0-update_level_gui;
#X obj 129 99 t b f;
#X connect 0 0 3 0;
#X connect 3 0 2 0;
#X connect 3 1 1 0;
#X restore 176 196 pd set_level;
#N canvas 145 284 675 492 \$0-set_envelope 0;
#X obj 26 20 inlet;
#X obj 477 36 array define \$0-envelope 4;
#X obj 118 187 r \$0-attack;
#X obj 55 118 s \$0-update_env_gui;
#X obj 128 218 t b f;
#X obj 155 284 unpack;
#X msg 155 264 \$1 0;
#X obj 128 240 s \$0-update_env_gui;
#X obj 271 218 t b f;
#X obj 298 284 unpack;
#X obj 271 240 s \$0-update_env_gui;
#X obj 261 187 r \$0-decay;
#X msg 298 264 \$1 1;
#X obj 408 218 t b f;
#X obj 435 284 unpack;
#X obj 408 240 s \$0-update_env_gui;
#X obj 551 218 t b f;
#X obj 578 284 unpack;
#X obj 551 240 s \$0-update_env_gui;
#X obj 398 187 r \$0-sustain;
#X obj 541 187 r \$0-release;
#X msg 435 264 \$1 2;
#X msg 578 264 \$1 3;
#X obj 55 87 t b l;
#X obj 82 278 t l b;
#X msg 109 301 0;
#X obj 82 410 array set \$0-envelope;
#X connect 0 0 23 0;
#X connect 2 0 4 0;
#X connect 4 0 7 0;
#X connect 4 1 6 0;
#X connect 5 0 26 0;
#X connect 5 1 26 1;
#X connect 6 0 5 0;
#X connect 8 0 10 0;
#X connect 8 1 12 0;
#X connect 9 0 26 0;
#X connect 9 1 26 1;
#X connect 11 0 8 0;
#X connect 12 0 9 0;
#X connect 13 0 15 0;
#X connect 13 1 21 0;
#X connect 14 0 26 0;
#X connect 14 1 26 1;
#X connect 16 0 18 0;
#X connect 16 1 22 0;
#X connect 17 0 26 0;
#X connect 17 1 26 1;
#X connect 19 0 13 0;
#X connect 20 0 16 0;
#X connect 21 0 14 0;
#X connect 22 0 17 0;
#X connect 23 0 3 0;
#X connect 23 1 24 0;
#X connect 24 0 26 0;
#X connect 24 1 25 0;
#X connect 25 0 26 1;
#X restore 257 196 pd \$0-set_envelope;
#X connect 0 0 1 0;
#X connect 0 0 2 0;
#X connect 1 0 3 0;
#X connect 1 1 2 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 3 1 5 0;
#X connect 3 2 6 0;
#X restore 347 82 pd \$0-input;
#N canvas 437 42 515 199 \$0-gui 0;
#N canvas 105 187 489 552 ratio-gui 0;
#X obj 68 245 inlet;
#X msg 151 375 set \$1;
#X obj 178 417 s \$0-ratio_slider_rcv;
#X obj 151 396 t a a;
#X obj 151 441 s \$0-ratio_number_rcv;
#X obj 70 54 r \$0-ratio_slider;
#X obj 85 146 s \$0-update_ratio_gui;
#X text 91 266 <-- receive bang when ratio has changed;
#X obj 100 310 v \$0-ratio;
#X text 153 353 <-- update interface ratio numberbox and slider;
#X obj 25 194 cnv 1 350 1 empty empty empty 20 12 0 14 -66577 -66577
0;
#X obj 112 117 v \$0-ratio;
#X obj 255 146 s \$0-update_ratio_gui;
#X obj 282 117 v \$0-ratio;
#X obj 240 54 r \$0-ratio_number;
#X obj 85 92 t b f;
#X obj 255 92 t b f;
#X obj 100 331 t b f;
#X obj 100 506 s \$0-output_ratio;
#N canvas 315 219 450 300 bang_to_open 0;
#X obj 10 10 bng 25 250 50 0 empty empty empty 17 7 0 10 -128992 -1
-1;
#X obj 34 72 message \; pd-\$0-out vis 1;
#X connect 0 0 1 0;
#X coords 0 -1 1 1 25 25 2 10 10;
#X restore 351 502 pd bang_to_open;
#X text 322 486 bang to open;
#X text 208 509 <-- see [pd \$0-out] -->;
#X text 30 207 Update GUI and output ratio value;
#X text 17 14 Set Ratio variable from interface:;
#X connect 0 0 8 0;
#X connect 1 0 3 0;
#X connect 3 0 4 0;
#X connect 3 1 2 0;
#X connect 5 0 15 0;
#X connect 8 0 17 0;
#X connect 14 0 16 0;
#X connect 15 0 6 0;
#X connect 15 1 11 0;
#X connect 16 0 12 0;
#X connect 16 1 13 0;
#X connect 17 0 18 0;
#X connect 17 1 1 0;
#X restore 70 124 pd ratio-gui;
#N canvas 595 187 489 552 level-gui 0;
#X obj 80 239 inlet;
#X msg 151 372 set \$1;
#X obj 151 393 t a a;
#X text 103 260 <-- receive bang when ratio has changed;
#X text 146 350 <-- update interface ratio numberbox and slider;
#X obj 25 194 cnv 1 350 1 empty empty empty 20 12 0 14 -66577 -66577
0;
#X obj 70 54 r \$0-level_slider;
#X obj 85 147 s \$0-update_level_gui;
#X obj 100 302 v \$0-level;
#X obj 178 414 s \$0-level_slider_rcv;
#X obj 151 438 s \$0-level_number_rcv;
#X obj 112 117 v \$0-level;
#X obj 275 147 s \$0-update_level_gui;
#X obj 302 117 v \$0-level;
#X obj 260 54 r \$0-level_number;
#X obj 85 92 t b f;
#X obj 275 92 t b f;
#X obj 100 331 t b f;
#N canvas 315 219 450 300 bang_to_open 0;
#X obj 10 10 bng 25 250 50 0 empty empty empty 17 7 0 10 -128992 -1
-1;
#X obj 34 72 message \; pd-\$0-out vis 1;
#X connect 0 0 1 0;
#X coords 0 -1 1 1 25 25 2 10 10;
#X restore 351 502 pd bang_to_open;
#X text 322 486 bang to open;
#X text 208 509 <-- see [pd \$0-out] -->;
#X text 30 207 Update GUI and output level value;
#X obj 100 506 s \$0-output_level;
#X text 17 14 Set Level variable from interface:;
#X connect 0 0 8 0;
#X connect 1 0 2 0;
#X connect 2 0 10 0;
#X connect 2 1 9 0;
#X connect 6 0 15 0;
#X connect 8 0 17 0;
#X connect 14 0 16 0;
#X connect 15 0 7 0;
#X connect 15 1 11 0;
#X connect 16 0 12 0;
#X connect 16 1 13 0;
#X connect 17 0 22 0;
#X connect 17 1 1 0;
#X restore 224 124 pd level-gui;
#N canvas 594 114 563 664 envelope-gui 0;
#X obj 60 267 inlet;
#X obj 160 409 unpack f f f f, f 34;
#X msg 160 431 set \$1;
#X msg 227 431 set \$1;
#X msg 294 431 set \$1;
#X msg 361 431 set \$1;
#X obj 160 537 s \$0-slider_attack_rcv;
#X obj 227 511 s \$0-slider_decay_rcv;
#X obj 294 482 s \$0-slider_sustain_rcv;
#X obj 361 453 s \$0-slider_release_rcv;
#X obj 47 67 r \$0-slider_attack;
#X obj 168 67 r \$0-slider_decay;
#X obj 286 67 r \$0-slider_sustain;
#X obj 416 67 r \$0-slider_release;
#X obj 89 329 array get \$0-envelope 0 4;
#X text 81 287 <-- receives bang when envelope has changed;
#N canvas 290 334 847 206 update_envelope_array 0;
#X obj 78 124 s \$0-attack;
#X obj 218 126 s \$0-decay;
#X obj 356 126 s \$0-sustain;
#X obj 496 126 s \$0-release;
#X obj 57 66 inlet;
#X obj 197 66 inlet;
#X obj 337 66 inlet;
#X obj 477 66 inlet;
#X text 66 47 attack;
#X text 211 47 decay;
#X text 352 47 sustain;
#X text 489 44 release;
#X text 595 125 <---;
#X text 435 125 <---;
#X text 285 125 <---;
#X text 151 125 <---;
#N canvas 315 219 450 300 bang_to_open 0;
#X obj 10 10 bng 25 250 50 0 empty empty empty 17 7 0 10 -128992 -1
-1;
#X obj 34 72 message \; pd-\$0-set_envelope vis 1;
#X connect 0 0 1 0;
#X coords 0 -1 1 1 25 25 2 10 10;
#X restore 715 143 pd bang_to_open;
#X text 742 148 bang to open;
#X text 626 125 sent to [pd set_envelope] in [\$0-input], f 28;
#X connect 4 0 0 0;
#X connect 5 0 1 0;
#X connect 6 0 2 0;
#X connect 7 0 3 0;
#X restore 121 133 pd update_envelope_array;
#X obj 25 204 cnv 1 480 1 empty empty empty 20 12 0 14 -66577 -66577
0;
#X text 149 384 <-------- update interface envelope sliders;
#X text 28 223 Update GUI and output Envelope;
#X obj 89 361 t b a;
#N canvas 315 219 450 300 bang_to_open 0;
#X obj 10 10 bng 25 250 50 0 empty empty empty 17 7 0 10 -128992 -1
-1;
#X obj 34 72 message \; pd-\$0-out vis 1;
#X connect 0 0 1 0;
#X coords 0 -1 1 1 25 25 2 10 10;
#X restore 360 603 pd bang_to_open;
#X text 331 587 bang to open;
#X text 217 610 <-- see [pd \$0-out] -->;
#X obj 89 607 s \$0-output_envelope;
#X text 28 24 Set Envelope array from interface:;
#X connect 0 0 14 0;
#X connect 1 0 2 0;
#X connect 1 1 3 0;
#X connect 1 2 4 0;
#X connect 1 3 5 0;
#X connect 2 0 6 0;
#X connect 3 0 7 0;
#X connect 4 0 8 0;
#X connect 5 0 9 0;
#X connect 10 0 16 0;
#X connect 11 0 16 1;
#X connect 12 0 16 2;
#X connect 13 0 16 3;
#X connect 14 0 20 0;
#X connect 20 0 24 0;
#X connect 20 1 1 0;
#X restore 380 123 pd envelope-gui;
#X obj 25 18 note 425 14 Menlo empty 0 0 0 0 0 255 255 255 0 0 GUI
control;
#X obj 364 73 r \$0-update_env_gui;
#X obj 50 73 r \$0-update_ratio_gui;
#X obj 204 73 r \$0-update_level_gui;
#X connect 4 0 2 0;
#X connect 5 0 0 0;
#X connect 6 0 1 0;
#X restore 347 111 pd \$0-gui;
#N canvas 421 135 450 329 \$0-init 0;
#X obj 99 93 initmess \; \$0-oscillator_title label Oscillator\\\ \$1
;
#X text 34 29 Parameters initialization;
#X text 90 70 Oscillator number title;
#X text 90 150 Initial Parameters;
#X obj 99 171 initmess \; \$0-attack 5 \; \$0-decay 250 \; \$0-sustain
1 \; \$0-release 1000 \; \$0-ratio 0.5 \; \$0-level 1 \; \$0-output_ratio
bang \; \$0-output_level bang \;;
#X restore 511 30 pd \$0-init;
#X connect 11 0 16 0;
#X connect 15 0 4 0;
#X coords 0 -1 1 1 235 145 2 10 10;
